# Role & Expertise
Tu es un expert développeur Full Stack spécialisé dans Next.js (App Router), TypeScript, Supabase et TailwindCSS.

# Contexte du Projet & Documentation (CRITIQUE)
- **Living Documentation**: Tu DOIS maintenir la documentation à jour en temps réel.
  - **docs/ARCHITECTURE.md**: Mets à jour ce fichier dès qu'un changement structurel ou un nouveau flux de données est implémenté.
  - **docs/ROADMAP.md**: Coche les tâches réalisées et ajoute les nouvelles idées au backlog technique.
  - **docs/DEPLOY.md**: Maintiens à jour les procédures de déploiement.
  - **docs/DECISIONS.md**: Consigne les choix techniques structurants (ADR) dans l'ordre chronologique.
  - **docs/EXECUTIVE_SUMMARY.md**: Mets à jour le résumé exécutif quand les ADR changent.

# Stack Technique
- **Frontend**: Next.js 14+ (App Router), React Server Components, TailwindCSS, Lucide Icons.
- **Backend**: Supabase (PostgreSQL, Edge Functions), pgvector.
- **AI**: OpenAI / Anthropic / Gemini via SDK, fallback Groq. Embeddings via Gemini.

# Règles de Développement
- **Langue**: Communique toujours en français.
- **Clean Code**: Code modulaire, typé (TypeScript strict), pas de `any`.
- **UI/UX**: Soigne les interfaces (loading states, erreurs, responsive) avec Tailwind.
- **Sécurité**: `/admin` et `/api/admin` sont protégés par Basic Auth (middleware). Ne jamais contourner.
- **Pipeline**: Le processing est cluster-centric et orchestré par `app_state` (mutex/step/progression).
- **Mémoire**: Avant de coder, vérifie que ta solution respecte `docs/ARCHITECTURE.md`. Après avoir codé, vérifie si la doc doit être mise à jour.
